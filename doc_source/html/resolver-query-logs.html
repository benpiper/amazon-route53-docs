<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>resolver-query-logs</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
  </style>
</head>
<body>
<h1 id="resolver-query-logging">Resolver query logging<a name="resolver-query-logs"></a></h1>
<p>You can log the following DNS queries: + Queries that originate in Amazon Virtual Private Cloud VPCs that you specify, as well as the responses to those DNS queries. + Queries from on-premises resources that use an inbound Resolver endpoint. + Queries that use an outbound Resolver endpoint for recursive DNS resolution. + Queries that use Route 53 Resolver DNS Firewall rules to block, allow, or monitor domain lists.</p>
<p>Resolver query logs include values such as the following: + The AWS Region where the VPC was created + The ID of the VPC that the query originated from + The IP address of the instance that the query originated from + The instance ID of the resource that the query originated from + The date and time that the query was first made + The DNS name requested (such as prod.example.com) + The DNS record type (such as A or AAAA) + The DNS response code, such as <code>NoError</code> or <code>ServFail</code> + The DNS response data, such as the IP address that is returned in response to the DNS query + A response to a DNS Firewall rule action</p>
<p>For a detailed list of all of the values logged and an example, see <a href="resolver-query-logs-format.html">Values that appear in Resolver query logs</a>.</p>
<p><strong>Note</strong><br />
As is standard for DNS resolvers, resolvers cache DNS queries for a length of time determined by the time-to-live (TTL) for the resolver. The Route 53 Resolver caches queries that originate in your VPCs, and responds from the cache whenever possible to speed up responses. Resolver query logging logs only unique queries, not queries that Resolver is able to respond to from the cache.<br />
For example, suppose that an EC2 instance in one of the VPCs that a query logging configuration is logging queries for, submits a request for accounting.example.com. Resolver caches the response to that query, and logs the query. If the same instance’s elastic network interface makes a query for accounting.example.com within the TTL of the Resolver’s cache, Resolver responds to the query from the cache. The second query is not logged.</p>
<p>You can send the logs to one of the following AWS resources: + Amazon CloudWatch Logs (CloudWatch Logs) log group + Amazon S3 (S3) bucket + Kinesis Data Firehose delivery stream</p>
<p>For more information, see <a href="resolver-query-logs-choosing-target-resource.html">AWS resources that you can send Resolver query logs to</a>.</p>
<p><strong>Topics</strong> + <a href="resolver-query-logs-choosing-target-resource.html">AWS resources that you can send Resolver query logs to</a> + <a href="resolver-query-logging-configurations-managing.html">Managing Resolver query logging configurations</a></p>
</body>
</html>
